---
- module_defaults:
    lb_healthmonitor_info:
      cloud: "{{ test_cloud }}"
  block:
    - name: Get health checks info
      lb_healthmonitor_info:
      register: hm

    - name: debug configs
      debug:
        var: hm.healthmonitors

    - name: assert result
      assert:
        that:
          - hm is success
          - hm is not changed
          - hm.healthmonitors is defined

    - name: Get backend servers info
      lb_member_info:
      register: bs

    - name: debug configs
      debug:
        var: bs.members

    - name: assert result
      assert:
        that:
          - bs is success
          - bs is not changed
          - bs.members is defined
